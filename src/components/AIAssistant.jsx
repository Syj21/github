// @ts-ignore;
import React, { useState, useRef, useEffect } from 'react';
// @ts-ignore;
import { MessageCircle, X, Send, Sparkles, MapPin, Calendar, Camera, Utensils } from 'lucide-react';
// @ts-ignore;
import { useToast } from '@/components/ui';

export function AIAssistant(props) {
  const {
    toast
  } = useToast();
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState([{
    role: 'assistant',
    content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ•¦ç…Œæ—…æ¸¸AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼æˆ‘å¯ä»¥å¸®æ‚¨ï¼š\n\nğŸ›ï¸ ä»‹ç»æ™¯ç‚¹ä¿¡æ¯\nğŸ—ºï¸ è§„åˆ’æ—…æ¸¸è·¯çº¿\nğŸ“… æä¾›å¼€æ”¾æ—¶é—´\nğŸ½ï¸ æ¨èç¾é£Ÿç‰¹äº§\nğŸ“¸ åˆ†äº«æ‹ç…§æŠ€å·§\n\nè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„ï¼Ÿ'
  }]);
  const [inputValue, setInputValue] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef(null);
  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({
      behavior: 'smooth'
    });
  };
  useEffect(() => {
    scrollToBottom();
  }, [messages, isOpen]);
  const getAIResponse = userMessage => {
    const message = userMessage.toLowerCase();

    // è«é«˜çªŸç›¸å…³é—®é¢˜
    if (message.includes('è«é«˜çªŸ') || message.includes('åƒä½›æ´')) {
      return `ğŸ›ï¸ **è«é«˜çªŸ**\n\nè«é«˜çªŸï¼Œä¿—ç§°åƒä½›æ´ï¼Œä½äºæ•¦ç…Œå¸‚ä¸œå—25å…¬é‡Œçš„é¸£æ²™å±±ä¸œéº“æ–­å´–ä¸Šã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚ä¸œå—25å…¬é‡Œ\nâ€¢ è¯„åˆ†ï¼š4.9/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š3-4å°æ—¶\n\nğŸ¨ **ç‰¹è‰²äº®ç‚¹**\nâ€¢ ä¸–ç•Œç°å­˜è§„æ¨¡æœ€å¤§çš„ä½›æ•™è‰ºæœ¯åœ£åœ°\nâ€¢ 1987å¹´è¢«åˆ—ä¸ºä¸–ç•Œæ–‡åŒ–é—äº§\nâ€¢ æ‹¥æœ‰735ä¸ªæ´çªŸï¼Œå£ç”»4.5ä¸‡å¹³æ–¹ç±³\nâ€¢ å½©å¡‘2415å°Š\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ éœ€è¦æå‰é¢„çº¦é—¨ç¥¨\nâ€¢ å»ºè®®é€‰æ‹©ä¸Šåˆæ—¶æ®µå‚è§‚ï¼Œå…‰çº¿æ›´å¥½\nâ€¢ æ´çªŸå†…ç¦æ­¢æ‹ç…§ï¼Œè¯·éµå®ˆè§„å®š\nâ€¢ å»ºè®®ç§Ÿç”¨è®²è§£å™¨æˆ–è¯·å¯¼æ¸¸è®²è§£`;
    }

    // é¸£æ²™å±±æœˆç‰™æ³‰ç›¸å…³é—®é¢˜
    if (message.includes('é¸£æ²™å±±') || message.includes('æœˆç‰™æ³‰')) {
      return `ğŸœï¸ **é¸£æ²™å±±æœˆç‰™æ³‰**\n\né¸£æ²™å±±æœˆç‰™æ³‰ä½äºæ•¦ç…Œå¸‚åŸå—5å…¬é‡Œå¤„ï¼Œæ²™æ³‰å…±å¤„ï¼Œå¦™é€ å¤©æˆã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚åŸå—5å…¬é‡Œ\nâ€¢ è¯„åˆ†ï¼š4.8/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š2-3å°æ—¶\n\nğŸŒŸ **ç‰¹è‰²äº®ç‚¹**\nâ€¢ æ²™ä¸å¡«æ³‰ï¼Œæ³‰ä¸æ¶¸ç«­çš„è‡ªç„¶å¥‡è§‚\nâ€¢ é¸£æ²™å±±å› æ²™åŠ¨æˆå“è€Œå¾—å\nâ€¢ æœˆç‰™æ³‰å½¢ä¼¼æ–°æœˆï¼Œæ°´è´¨ç”˜å†½\nâ€¢ æœ€ä½³è§‚èµæ—¶é—´ï¼šæ—¥è½æ—¶åˆ†\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ å¯ä»¥ä½“éªŒéª‘éª†é©¼ã€æ»‘æ²™ç­‰é¡¹ç›®\nâ€¢ å»ºè®®å‚æ™šå‰å¾€ï¼Œæ¬£èµæ—¥è½ç¾æ™¯\nâ€¢ ç©¿èˆ’é€‚çš„é‹å­ï¼Œä¾¿äºçˆ¬æ²™å±±\nâ€¢ å¸¦å¥½é˜²æ™’ç”¨å“å’Œå……è¶³çš„æ°´`;
    }

    // ç‰é—¨å…³ç›¸å…³é—®é¢˜
    if (message.includes('ç‰é—¨å…³')) {
      return `ğŸ° **ç‰é—¨å…³**\n\nç‰é—¨å…³ï¼Œä¿—ç§°å°æ–¹ç›˜åŸï¼Œä½äºæ•¦ç…Œå¸‚è¥¿åŒ—90å…¬é‡Œå¤„çš„æˆˆå£æ»©ä¸Šã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚è¥¿åŒ—90å…¬é‡Œ\nâ€¢ è¯„åˆ†ï¼š4.7/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š1-2å°æ—¶\n\nğŸ“œ **å†å²èƒŒæ™¯**\nâ€¢ å§‹å»ºäºæ±‰æ­¦å¸æ—¶æœŸ\nâ€¢ å¤ä»£ä¸ç»¸ä¹‹è·¯é€šå¾€è¥¿åŸŸåŒ—é“çš„å’½å–‰è¦éš˜\nâ€¢ å› è¥¿åŸŸå’Œç”°ç¾ç‰ç»æ­¤è¾“å…¥ä¸­åŸè€Œå¾—å\nâ€¢ ç‹ä¹‹æ¶£è¯—å¥ï¼š"ç¾Œç¬›ä½•é¡»æ€¨æ¨æŸ³ï¼Œæ˜¥é£ä¸åº¦ç‰é—¨å…³"\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ å»ºè®®ä¸é˜³å…³ã€é›…ä¸¹é­”é¬¼åŸä¸€èµ·æ¸¸è§ˆ\nâ€¢ æ„Ÿå—å¤§æ¼ å­¤çƒŸçš„è‹å‡‰ä¹‹ç¾\nâ€¢ äº†è§£ä¸ç»¸ä¹‹è·¯çš„å†å²æ–‡åŒ–`;
    }

    // é›…ä¸¹é­”é¬¼åŸç›¸å…³é—®é¢˜
    if (message.includes('é›…ä¸¹') || message.includes('é­”é¬¼åŸ')) {
      return `ğŸŒªï¸ **é›…ä¸¹é­”é¬¼åŸ**\n\né›…ä¸¹é­”é¬¼åŸï¼Œåˆç§°é›…ä¸¹å›½å®¶åœ°è´¨å…¬å›­ï¼Œä½äºæ•¦ç…Œå¸‚è¥¿åŒ—180å…¬é‡Œçš„ç½—å¸ƒæ³Šè¾¹ç¼˜ã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚è¥¿åŒ—180å…¬é‡Œ\nâ€¢ è¯„åˆ†ï¼š4.6/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š2-3å°æ—¶\n\nğŸ­ **ç‰¹è‰²äº®ç‚¹**\nâ€¢ å„ç§å½¢çŠ¶å¥‡ç‰¹çš„é£èš€åœ°è²Œ\nâ€¢ å¤§é£åˆ®è¿‡æ—¶å‘å‡ºæ€ªå¼‚å£°éŸ³\nâ€¢ æ‘„å½±çˆ±å¥½è€…å’Œæ¢é™©è€…çš„å¤©å ‚\nâ€¢ æ—¥è½æ—¶åˆ†æ™¯è‰²æœ€ä¸ºå£®è§‚\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ æœ€ä½³æ¸¸è§ˆæ—¶é—´ï¼šå‚æ™šæ—¥è½æ—¶åˆ†\nâ€¢ å¸¦å¥½ç›¸æœºï¼Œæ‹æ‘„ç‹¬ç‰¹åœ°è²Œ\nâ€¢ æ³¨æ„é˜²æ™’å’Œè¡¥æ°´\nâ€¢ å»ºè®®å‚åŠ ä¸€æ—¥æ¸¸å›¢ï¼Œäº¤é€šæ›´æ–¹ä¾¿`;
    }

    // æ•¦ç…Œåšç‰©é¦†ç›¸å…³é—®é¢˜
    if (message.includes('åšç‰©é¦†')) {
      return `ğŸ›ï¸ **æ•¦ç…Œåšç‰©é¦†**\n\næ•¦ç…Œåšç‰©é¦†ä½äºæ•¦ç…Œå¸‚ä¸­å¿ƒï¼Œæ˜¯å±•ç¤ºæ•¦ç…Œå†å²æ–‡åŒ–å’Œä¸ç»¸ä¹‹è·¯æ–‡æ˜çš„é‡è¦åšç‰©é¦†ã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚ä¸­å¿ƒé˜³å…³ä¸œè·¯\nâ€¢ è¯„åˆ†ï¼š4.8/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š2-3å°æ—¶\n\nğŸ¨ **é¦†è—ç‰¹è‰²**\nâ€¢ å¤§é‡çè´µæ–‡ç‰©ï¼šæ±‰ç®€ã€æ–‡ä¹¦ã€å£ç”»ã€é›•å¡‘\nâ€¢ å…¨é¢å±•ç¤ºæ•¦ç…Œå†å²å˜è¿å’Œæ–‡åŒ–å‘å±•\nâ€¢ ç°ä»£åŒ–å±•ç¤ºæ‰‹æ®µ\nâ€¢ äº†è§£ä¸ç»¸ä¹‹è·¯é‡é•‡çš„è¾‰ç…Œå†å²\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ å…è´¹å¼€æ”¾ï¼Œéœ€æºå¸¦èº«ä»½è¯\nâ€¢ å»ºè®®é¢„ç•™å……è¶³æ—¶é—´ä»”ç»†å‚è§‚\nâ€¢ å¯ä»¥äº†è§£æ•¦ç…Œçš„å†å²èƒŒæ™¯åå†å»è«é«˜çªŸ`;
    }

    // é˜³å…³ç›¸å…³é—®é¢˜
    if (message.includes('é˜³å…³')) {
      return `ğŸ”ï¸ **é˜³å…³é—å€**\n\né˜³å…³ä½äºæ•¦ç…Œå¸‚è¥¿å—70å…¬é‡Œå¤„çš„å¤è‘£æ»©ä¸Šï¼Œæ˜¯ä¸­å›½å¤ä»£é™†è·¯å¯¹å¤–äº¤é€šå’½å–‰ä¹‹åœ°ã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚è¥¿å—70å…¬é‡Œ\nâ€¢ è¯„åˆ†ï¼š4.7/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š1-2å°æ—¶\n\nğŸ“œ **å†å²èƒŒæ™¯**\nâ€¢ å§‹å»ºäºæ±‰æ­¦å¸æ—¶æœŸ\nâ€¢ ä¸ç»¸ä¹‹è·¯å—è·¯å¿…ç»çš„å…³éš˜\nâ€¢ ç‹ç»´è¯—å¥ï¼š"åŠå›æ›´å°½ä¸€æ¯é…’ï¼Œè¥¿å‡ºé˜³å…³æ— æ•…äºº"\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ æ„Ÿå—ä¸ç»¸ä¹‹è·¯çš„å†å²æ²§æ¡‘\nâ€¢ å¯ä»¥ç™»é«˜æœ›è¿œï¼Œæ¬£èµå¤§æ¼ é£å…‰\nâ€¢ å»ºè®®ä¸ç‰é—¨å…³ä¸€èµ·æ¸¸è§ˆ`;
    }

    // æ²™æ´²å¤œå¸‚ç›¸å…³é—®é¢˜
    if (message.includes('å¤œå¸‚') || message.includes('æ²™æ´²')) {
      return `ğŸŒ™ **æ²™æ´²å¤œå¸‚**\n\næ²™æ´²å¤œå¸‚ä½äºæ•¦ç…Œå¸‚ä¸­å¿ƒï¼Œæ˜¯æ•¦ç…Œæœ€çƒ­é—¹çš„å¤œå¸‚ä¹‹ä¸€ã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚ä¸­å¿ƒ\nâ€¢ è¯„åˆ†ï¼š4.6/5\nâ€¢ å¼€æ”¾æ—¶é—´ï¼šæ™šä¸Š6:00-å‡Œæ™¨\n\nğŸ½ï¸ **ç‰¹è‰²ç¾é£Ÿ**\nâ€¢ é©´è‚‰é»„é¢\nâ€¢ çƒ¤ç¾Šè‚‰ä¸²\nâ€¢ æçš®æ°´\nâ€¢ é©´è‚‰é»„é¢\nâ€¢ å„ç§è¥¿åŒ—ç‰¹è‰²å°åƒ\n\nğŸ›ï¸ **è´­ç‰©æ¨è**\nâ€¢ æ•¦ç…Œå£ç”»å¤åˆ¶å“\nâ€¢ ä¸ç»‡å“\nâ€¢ æ‰‹å·¥è‰ºå“\nâ€¢ çºªå¿µå“\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ æ™šä¸Šå‰å¾€ï¼Œä½“éªŒçƒ­é—¹æ°›å›´\nâ€¢ å“å°å½“åœ°ç‰¹è‰²ç¾é£Ÿ\nâ€¢ è´­ä¹°çºªå¿µå“å’Œæ‰‹å·¥è‰ºå“`;
    }

    // ä¸è·¯é—äº§åŸç›¸å…³é—®é¢˜
    if (message.includes('ä¸è·¯') || message.includes('é—äº§åŸ')) {
      return `ğŸº **ä¸è·¯é—äº§åŸ**\n\nä¸è·¯é—äº§åŸä½äºæ•¦ç…Œå¸‚éƒŠï¼Œæ˜¯ä¸€åº§ä»¥ä¸ç»¸ä¹‹è·¯æ–‡åŒ–ä¸ºä¸»é¢˜çš„å¤§å‹æ–‡åŒ–æ—…æ¸¸æ™¯åŒºã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚éƒŠ\nâ€¢ è¯„åˆ†ï¼š4.5/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š3-4å°æ—¶\n\nğŸ­ **ç‰¹è‰²äº®ç‚¹**\nâ€¢ å¤åŸå¤ä»£ä¸ç»¸ä¹‹è·¯é‡è¦åŸå¸‚å’Œå»ºç­‘\nâ€¢ é•¿å®‰åŸã€æ•¦ç…Œå¤åŸã€æ³¢æ–¯é›†å¸‚ç­‰\nâ€¢ ä»¿ä½›ç©¿è¶Šå›åƒå¹´å‰çš„ä¸ç»¸ä¹‹è·¯\nâ€¢ ä¸°å¯Œçš„æ–‡åŒ–è¡¨æ¼”å’Œäº’åŠ¨ä½“éªŒé¡¹ç›®\n\nğŸª **ä½“éªŒé¡¹ç›®**\nâ€¢ ä¸ç»¸ä¹‹è·¯ä¸»é¢˜æ¼”å‡º\nâ€¢ ä¼ ç»Ÿæ‰‹å·¥è‰ºåˆ¶ä½œ\nâ€¢ å¤ä»£æœé¥°ä½“éªŒ\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ é€‚åˆå…¨å®¶æ¸¸è§ˆï¼Œå¯“æ•™äºä¹\nâ€¢ å¯ä»¥ä½“éªŒå¤ä»£ä¸ç»¸ä¹‹è·¯æ–‡åŒ–\nâ€¢ å»ºè®®é¢„ç•™å……è¶³æ—¶é—´ä½“éªŒå„ç§é¡¹ç›®`;
    }

    // é›·éŸ³å¯ºç›¸å…³é—®é¢˜
    if (message.includes('é›·éŸ³å¯º')) {
      return `ğŸ¯ **é›·éŸ³å¯º**\n\né›·éŸ³å¯ºä½äºæ•¦ç…Œå¸‚ä¸œå—ï¼Œæ˜¯ä¸€åº§å†å²æ‚ ä¹…çš„ä½›æ•™å¯ºé™¢ã€‚\n\nğŸ“Œ **åŸºæœ¬ä¿¡æ¯**\nâ€¢ ä½ç½®ï¼šæ•¦ç…Œå¸‚ä¸œå—\nâ€¢ è¯„åˆ†ï¼š4.6/5\nâ€¢ å»ºè®®æ¸¸è§ˆæ—¶é—´ï¼š1-2å°æ—¶\n\nğŸ›ï¸ **å»ºç­‘ç‰¹è‰²**\nâ€¢ å§‹å»ºäºå”ä»£ï¼Œå†ç»å¤šæ¬¡ä¿®ç¼®\nâ€¢ å¤§é›„å®æ®¿ã€è§‚éŸ³æ®¿ã€è—ç»æ¥¼ç­‰ä¸»è¦å»ºç­‘\nâ€¢ å»ºç­‘å®ä¼Ÿå£®è§‚ï¼Œä¾›å¥‰å„ç§ä½›åƒ\nâ€¢ ç¯å¢ƒæ¸…å¹½ï¼Œå¤æ ‘å‚å¤©\n\nğŸ™ **æ–‡åŒ–ä½“éªŒ**\nâ€¢ å‚æ‹œç¥ˆç¦ã€é™å¿ƒä¿®è¡Œ\nâ€¢ å®šæœŸä¸¾åŠæ³•ä¼šæ´»åŠ¨\nâ€¢ æ„Ÿå—ä½›æ•™æ–‡åŒ–æ°›å›´\n\nğŸ’¡ **æ¸¸è§ˆå»ºè®®**\nâ€¢ é€‚åˆé™å¿ƒå‚æ‹œï¼Œæ„Ÿå—ä½›æ•™æ–‡åŒ–\nâ€¢ å¯ä»¥äº†è§£ä½›æ•™è‰ºæœ¯å’Œå»ºç­‘\nâ€¢ ä¿æŒå®‰é™ï¼Œå°Šé‡å®—æ•™åœºæ‰€`;
    }

    // è·¯çº¿è§„åˆ’é—®é¢˜
    if (message.includes('è·¯çº¿') || message.includes('è¡Œç¨‹') || message.includes('è§„åˆ’')) {
      return `ğŸ—ºï¸ **æ•¦ç…Œæ—…æ¸¸è·¯çº¿æ¨è**\n\nğŸ“… **ä¸€æ—¥æ¸¸è·¯çº¿**\nä¸Šåˆï¼šè«é«˜çªŸï¼ˆ3-4å°æ—¶ï¼‰\nä¸‹åˆï¼šé¸£æ²™å±±æœˆç‰™æ³‰ï¼ˆ2-3å°æ—¶ï¼‰\næ™šä¸Šï¼šæ²™æ´²å¤œå¸‚\n\nğŸ“… **ä¸¤æ—¥æ¸¸è·¯çº¿**\nç¬¬ä¸€å¤©ï¼šè«é«˜çªŸ + é¸£æ²™å±±æœˆç‰™æ³‰ + æ²™æ´²å¤œå¸‚\nç¬¬äºŒå¤©ï¼šç‰é—¨å…³ + é›…ä¸¹é­”é¬¼åŸï¼ˆä¸€æ—¥æ¸¸ï¼‰\n\nğŸ“… **ä¸‰æ—¥æ¸¸è·¯çº¿**\nç¬¬ä¸€å¤©ï¼šè«é«˜çªŸ + é¸£æ²™å±±æœˆç‰™æ³‰\nç¬¬äºŒå¤©ï¼šç‰é—¨å…³ + é›…ä¸¹é­”é¬¼åŸ + é˜³å…³\nç¬¬ä¸‰å¤©ï¼šæ•¦ç…Œåšç‰©é¦† + ä¸è·¯é—äº§åŸ + æ²™æ´²å¤œå¸‚\n\nğŸ’¡ **è´´å¿ƒæç¤º**\nâ€¢ è«é«˜çªŸéœ€è¦æå‰é¢„çº¦\nâ€¢ å»ºè®®åŒ…è½¦æˆ–å‚åŠ ä¸€æ—¥æ¸¸å›¢å‰å¾€è¿œè·ç¦»æ™¯ç‚¹\nâ€¢ æ³¨æ„é˜²æ™’å’Œè¡¥æ°´\nâ€¢ æœ€ä½³æ—…æ¸¸å­£èŠ‚ï¼š4-10æœˆ`;
    }

    // ç¾é£Ÿæ¨èé—®é¢˜
    if (message.includes('ç¾é£Ÿ') || message.includes('åƒ') || message.includes('ç‰¹äº§')) {
      return `ğŸ½ï¸ **æ•¦ç…Œç¾é£Ÿæ¨è**\n\nğŸ¥˜ **å¿…å°ç¾é£Ÿ**\nâ€¢ **é©´è‚‰é»„é¢** - æ•¦ç…Œç‰¹è‰²é¢é£Ÿï¼Œé©´è‚‰é²œå«©ï¼Œé¢æ¡åŠ²é“\nâ€¢ **çƒ¤ç¾Šè‚‰ä¸²** - è¥¿åŒ—ç‰¹è‰²ï¼Œè‚‰è´¨é²œç¾ï¼Œé¦™æ°”æ‰‘é¼»\nâ€¢ **æçš®æ°´** - å½“åœ°ç‰¹è‰²é¥®å“ï¼Œé…¸ç”œè§£æ¸´\nâ€¢ **èƒ¡ç¾Šç„–é¥¼** - ä¼ ç»Ÿè¥¿åŒ—èœï¼Œç¾Šè‚‰è½¯çƒ‚ï¼Œé¥¼é¦™æµ“éƒ\nâ€¢ **æ³¡å„¿æ²¹ç³•** - å½“åœ°ç‰¹è‰²å°åƒï¼Œå¤–é…¥å†…è½¯\n\nğŸ›ï¸ **ç‰¹äº§æ¨è**\nâ€¢ **æå¹¿æ** - æ•¦ç…Œç‰¹äº§æ°´æœï¼Œç”œç¾å¤šæ±\nâ€¢ **é¸£å±±å¤§æ£** - å½“åœ°ç‰¹äº§çº¢æ£ï¼Œè¥å…»ä¸°å¯Œ\nâ€¢ **æ•¦ç…Œåœ°æ¯¯** - ä¼ ç»Ÿæ‰‹å·¥è‰ºå“ï¼Œç²¾ç¾å®ç”¨\nâ€¢ **å¤œå…‰æ¯** - è‘—åçš„é…’å™¨ï¼Œå·¥è‰ºç²¾æ¹›\n\nğŸ“ **ç¾é£Ÿåœ°ç‚¹**\nâ€¢ æ²™æ´²å¤œå¸‚ - å“å°å„ç§å°åƒå’Œç‰¹äº§\nâ€¢ å¸‚åŒºå„å¤§é¤å… - å“å°æ­£é¤\nâ€¢ å½“åœ°å†œå®¶ä¹ - ä½“éªŒåœ°é“è¥¿åŒ—èœ`;
    }

    // å¼€æ”¾æ—¶é—´é—®é¢˜
    if (message.includes('æ—¶é—´') || message.includes('å¼€æ”¾') || message.includes('é—¨ç¥¨')) {
      return `ğŸ• **æ™¯ç‚¹å¼€æ”¾æ—¶é—´åŠé—¨ç¥¨ä¿¡æ¯**\n\nğŸ›ï¸ **è«é«˜çªŸ**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š8:30-18:00ï¼ˆ4æœˆ-10æœˆï¼‰\nâ€¢ é—¨ç¥¨ï¼š238å…ƒï¼ˆå«æ•°å­—å±•ç¤ºä¸­å¿ƒ+è«é«˜çªŸ+åŒºé—´è½¦ï¼‰\nâ€¢ éœ€æå‰é¢„çº¦\n\nğŸœï¸ **é¸£æ²™å±±æœˆç‰™æ³‰**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š6:00-19:30ï¼ˆå¤å­£ï¼‰\nâ€¢ é—¨ç¥¨ï¼š110å…ƒï¼ˆä¸‰æ—¥æœ‰æ•ˆï¼‰\n\nğŸ° **ç‰é—¨å…³**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š8:00-18:00\nâ€¢ é—¨ç¥¨ï¼š40å…ƒ\n\nğŸŒªï¸ **é›…ä¸¹é­”é¬¼åŸ**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š8:00-21:00\nâ€¢ é—¨ç¥¨ï¼š120å…ƒï¼ˆå«åŒºé—´è½¦ï¼‰\n\nğŸ›ï¸ **æ•¦ç…Œåšç‰©é¦†**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š9:00-17:00ï¼ˆå‘¨ä¸€é—­é¦†ï¼‰\nâ€¢ é—¨ç¥¨ï¼šå…è´¹\n\nğŸ”ï¸ **é˜³å…³**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š8:00-18:00\nâ€¢ é—¨ç¥¨ï¼š60å…ƒ\n\nğŸŒ™ **æ²™æ´²å¤œå¸‚**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š18:00-å‡Œæ™¨\nâ€¢ é—¨ç¥¨ï¼šå…è´¹\n\nğŸº **ä¸è·¯é—äº§åŸ**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š9:00-18:00\nâ€¢ é—¨ç¥¨ï¼š120å…ƒ\n\nğŸ¯ **é›·éŸ³å¯º**\nâ€¢ å¼€æ”¾æ—¶é—´ï¼š8:00-18:00\nâ€¢ é—¨ç¥¨ï¼šå…è´¹\n\nğŸ’¡ **æ¸©é¦¨æç¤º**\nâ€¢ è«é«˜çªŸé—¨ç¥¨éœ€æå‰åœ¨å®˜ç½‘é¢„çº¦\nâ€¢ éƒ¨åˆ†æ™¯ç‚¹é—¨ç¥¨æœ‰æ·¡æ—ºå­£ä»·æ ¼å·®å¼‚\nâ€¢ å»ºè®®è´­ä¹°è”ç¥¨æˆ–å¥—ç¥¨æ›´åˆ’ç®—`;
    }

    // æ‹ç…§æŠ€å·§é—®é¢˜
    if (message.includes('æ‹ç…§') || message.includes('æ‘„å½±') || message.includes('ç…§ç‰‡')) {
      return `ğŸ“¸ **æ•¦ç…Œæ‹ç…§æŠ€å·§æ¨è**\n\nğŸœï¸ **é¸£æ²™å±±æœˆç‰™æ³‰**\nâ€¢ æœ€ä½³æ—¶é—´ï¼šæ—¥å‡ºå’Œæ—¥è½æ—¶åˆ†\nâ€¢ æ‹æ‘„è§’åº¦ï¼šä»æ²™ä¸˜é¡¶éƒ¨ä¿¯æ‹æœˆç‰™æ³‰å…¨æ™¯\nâ€¢ æŠ€å·§ï¼šåˆ©ç”¨å‰ªå½±æ•ˆæœæ‹æ‘„éª†é©¼å’Œäººç‰©\n\nğŸ›ï¸ **è«é«˜çªŸ**\nâ€¢ æ³¨æ„ï¼šæ´çªŸå†…ç¦æ­¢æ‹ç…§\nâ€¢ å¯ä»¥æ‹æ‘„ï¼šä¹å±‚æ¥¼å¤–è§‚ã€å‘¨è¾¹é£æ™¯\nâ€¢ å»ºè®®ï¼šè´­ä¹°å®˜æ–¹ç”»å†Œå’Œæ˜ä¿¡ç‰‡\n\nğŸŒªï¸ **é›…ä¸¹é­”é¬¼åŸ**\nâ€¢ æœ€ä½³æ—¶é—´ï¼šå‚æ™šæ—¥è½æ—¶åˆ†\nâ€¢ æ‹æ‘„é‡ç‚¹ï¼šå¥‡ç‰¹çš„åœ°è²Œé€ å‹\nâ€¢ æŠ€å·§ï¼šåˆ©ç”¨ä¾§å…‰çªå‡ºåœ°è²Œçº¹ç†\n\nğŸ° **ç‰é—¨å…³ & é˜³å…³**\nâ€¢ æ‹æ‘„ä¸»é¢˜ï¼šå†å²æ²§æ¡‘æ„Ÿ\nâ€¢ æŠ€å·§ï¼šåˆ©ç”¨å¤§æ¼ å­¤çƒŸçš„æ„å¢ƒ\nâ€¢ å»ºè®®ï¼šæ‹æ‘„äººç‰©ä¸å¤è¿¹çš„å¯¹æ¯”\n\nğŸŒ™ **æ²™æ´²å¤œå¸‚**\nâ€¢ æ‹æ‘„é‡ç‚¹ï¼šçƒ­é—¹çš„å¤œå¸‚æ°›å›´\nâ€¢ æŠ€å·§ï¼šåˆ©ç”¨ç¯å…‰å’ŒçƒŸç«æ°”\nâ€¢ å»ºè®®ï¼šæ‹æ‘„ç¾é£Ÿå’Œæ‰‹å·¥è‰ºå“ç‰¹å†™\n\nğŸ’¡ **é€šç”¨æŠ€å·§**\nâ€¢ å¸¦å¥½ä¸‰è„šæ¶ï¼Œæ‹æ‘„å¤œæ™¯\nâ€¢ æ³¨æ„ä¿æŠ¤ç›¸æœºï¼Œé˜²æ­¢æ²™å°˜\nâ€¢ åˆ©ç”¨é»„é‡‘æ—¶æ®µæ‹æ‘„\nâ€¢ å¤šå°è¯•ä¸åŒè§’åº¦å’Œæ„å›¾`;
    }

    // äº¤é€šé—®é¢˜
    if (message.includes('äº¤é€š') || message.includes('æ€ä¹ˆå»') || message.includes('åˆ°è¾¾')) {
      return `ğŸš— **æ•¦ç…Œäº¤é€šæŒ‡å—**\n\nâœˆï¸ **åˆ°è¾¾æ•¦ç…Œ**\nâ€¢ æ•¦ç…Œæœºåœºï¼šæœ‰èˆªç­è¿æ¥åŒ—äº¬ã€ä¸Šæµ·ã€è¥¿å®‰ç­‰åŸå¸‚\nâ€¢ ç«è½¦ï¼šæ•¦ç…Œç«è½¦ç«™ï¼Œæœ‰å…°æ–°é“è·¯ç»è¿‡\nâ€¢ é•¿é€”æ±½è½¦ï¼šä»å…°å·ã€è¥¿å®ç­‰åœ°æœ‰ç­è½¦\n\nğŸš• **å¸‚å†…äº¤é€š**\nâ€¢ å‡ºç§Ÿè½¦ï¼šå¸‚åŒºå†…æ™¯ç‚¹æ‰“è½¦æ–¹ä¾¿\nâ€¢ å…¬äº¤è½¦ï¼šæœ‰å…¬äº¤çº¿è·¯è¿æ¥ä¸»è¦æ™¯ç‚¹\nâ€¢ ç§Ÿè½¦ï¼šå¯ä»¥ç§Ÿè½¦è‡ªé©¾æ¸¸\n\nğŸšŒ **æ™¯ç‚¹é—´äº¤é€š**\nâ€¢ è«é«˜çªŸã€é¸£æ²™å±±ï¼šå¸‚åŒºæ‰“è½¦çº¦20-30å…ƒ\nâ€¢ ç‰é—¨å…³ã€é›…ä¸¹ï¼šå»ºè®®åŒ…è½¦æˆ–å‚åŠ ä¸€æ—¥æ¸¸å›¢\nâ€¢ é˜³å…³ï¼šå»ºè®®åŒ…è½¦å‰å¾€\n\nğŸ’¡ **äº¤é€šå»ºè®®**\nâ€¢ è¿œè·ç¦»æ™¯ç‚¹å»ºè®®åŒ…è½¦æˆ–å‚åŠ ä¸€æ—¥æ¸¸å›¢\nâ€¢ å¯ä»¥åœ¨å¸‚åŒºæ‹¼è½¦å‰å¾€è¿œè·ç¦»æ™¯ç‚¹\nâ€¢ æ³¨æ„æ²™æ¼ åœ°åŒºè¡Œè½¦å®‰å…¨\nâ€¢ æå‰è§„åˆ’å¥½è·¯çº¿å’Œæ—¶é—´`;
    }

    // ä½å®¿é—®é¢˜
    if (message.includes('ä½å®¿') || message.includes('é…’åº—') || message.includes('ä½')) {
      return `ğŸ¨ **æ•¦ç…Œä½å®¿æ¨è**\n\nğŸ“ **å¸‚åŒºä½å®¿**\nâ€¢ ä¼˜ç‚¹ï¼šäº¤é€šä¾¿åˆ©ï¼Œé è¿‘æ²™æ´²å¤œå¸‚\nâ€¢ æ¨èï¼šæ•¦ç…Œå®¾é¦†ã€é˜³å…‰æ²™å·å¤§é…’åº—\nâ€¢ ä»·æ ¼ï¼š200-500å…ƒ/æ™š\n\nğŸœï¸ **é¸£æ²™å±±é™„è¿‘**\nâ€¢ ä¼˜ç‚¹ï¼šé è¿‘æ™¯ç‚¹ï¼Œæ–¹ä¾¿çœ‹æ—¥å‡ºæ—¥è½\nâ€¢ æ¨èï¼šé¸£æ²™å±±æœˆç‰™æ³‰åº¦å‡æ‘\nâ€¢ ä»·æ ¼ï¼š300-800å…ƒ/æ™š\n\nğŸ›ï¸ **è«é«˜çªŸé™„è¿‘**\nâ€¢ ä¼˜ç‚¹ï¼šæ–¹ä¾¿å‚è§‚è«é«˜çªŸ\nâ€¢ æ¨èï¼šè«é«˜çªŸé™„è¿‘çš„æ°‘å®¿\nâ€¢ ä»·æ ¼ï¼š200-400å…ƒ/æ™š\n\nğŸ’¡ **ä½å®¿å»ºè®®**\nâ€¢ æ—ºå­£ï¼ˆ4-10æœˆï¼‰å»ºè®®æå‰é¢„è®¢\nâ€¢ å¯ä»¥é€‰æ‹©ç‰¹è‰²æ°‘å®¿ä½“éªŒå½“åœ°æ–‡åŒ–\nâ€¢ æ³¨æ„æŸ¥çœ‹é…’åº—è¯„ä»·å’Œè®¾æ–½\nâ€¢ å¸‚åŒºä½å®¿æ€§ä»·æ¯”æœ€é«˜`;
    }

    // é—®å€™è¯­
    if (message.includes('ä½ å¥½') || message.includes('æ‚¨å¥½') || message.includes('hi') || message.includes('hello')) {
      return `æ‚¨å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼ğŸ˜Š\n\næˆ‘æ˜¯æ•¦ç…Œæ—…æ¸¸AIåŠ©æ‰‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ä»¥ä¸‹å¸®åŠ©ï¼š\n\nğŸ›ï¸ æ™¯ç‚¹ä»‹ç»å’Œæ¨è\nğŸ—ºï¸ æ—…æ¸¸è·¯çº¿è§„åˆ’\nğŸ“… å¼€æ”¾æ—¶é—´å’Œé—¨ç¥¨ä¿¡æ¯\nğŸ½ï¸ ç¾é£Ÿå’Œç‰¹äº§æ¨è\nğŸ“¸ æ‹ç…§æŠ€å·§å’Œæ‘„å½±å»ºè®®\nğŸš— äº¤é€šå’Œä½å®¿æŒ‡å—\n\nè¯·é—®æ‚¨æƒ³äº†è§£å“ªæ–¹é¢çš„ä¿¡æ¯å‘¢ï¼Ÿ`;
    }

    // é»˜è®¤å›å¤
    return `æ„Ÿè°¢æ‚¨çš„æé—®ï¼ğŸ˜Š\n\næˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”å…³äºæ•¦ç…Œæ—…æ¸¸çš„å„ç§é—®é¢˜ï¼Œä¾‹å¦‚ï¼š\n\nğŸ›ï¸ æ™¯ç‚¹ä¿¡æ¯ï¼šè«é«˜çªŸã€é¸£æ²™å±±ã€ç‰é—¨å…³ç­‰\nğŸ—ºï¸ è·¯çº¿è§„åˆ’ï¼šä¸€æ—¥æ¸¸ã€ä¸¤æ—¥æ¸¸ã€ä¸‰æ—¥æ¸¸è·¯çº¿\nğŸ“… å®ç”¨ä¿¡æ¯ï¼šå¼€æ”¾æ—¶é—´ã€é—¨ç¥¨ä»·æ ¼\nğŸ½ï¸ ç¾é£Ÿæ¨èï¼šå½“åœ°ç‰¹è‰²ç¾é£Ÿå’Œç‰¹äº§\nğŸ“¸ æ‹ç…§æŠ€å·§ï¼šå„æ™¯ç‚¹çš„æœ€ä½³æ‹æ‘„ç‚¹å’Œæ—¶é—´\nğŸš— äº¤é€šä½å®¿ï¼šå¦‚ä½•åˆ°è¾¾å’Œä½å®¿æ¨è\n\nè¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³äº†è§£çš„å…·ä½“å†…å®¹ï¼Œæˆ‘ä¼šå°½åŠ›ä¸ºæ‚¨è§£ç­”ï¼`;
  };
  const handleSendMessage = async () => {
    if (!inputValue.trim()) {
      toast({
        title: 'æç¤º',
        description: 'è¯·è¾“å…¥æ‚¨çš„é—®é¢˜',
        variant: 'default'
      });
      return;
    }
    const userMessage = inputValue.trim();
    setMessages(prev => [...prev, {
      role: 'user',
      content: userMessage
    }]);
    setInputValue('');
    setIsTyping(true);

    // æ¨¡æ‹ŸAIæ€è€ƒå»¶è¿Ÿ
    setTimeout(() => {
      const aiResponse = getAIResponse(userMessage);
      setMessages(prev => [...prev, {
        role: 'assistant',
        content: aiResponse
      }]);
      setIsTyping(false);
    }, 1000 + Math.random() * 1000);
  };
  const handleKeyPress = e => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSendMessage();
    }
  };
  return <div className="fixed top-4 right-4 z-50">
      {/* æ‚¬æµ®æŒ‰é’® */}
      {!isOpen && <button onClick={() => setIsOpen(true)} className="w-14 h-14 bg-gradient-to-br from-[#D4A574] to-[#E8A849] rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 flex items-center justify-center group" style={{
      boxShadow: '0 4px 20px rgba(212, 165, 116, 0.4)'
    }}>
          <MessageCircle className="w-7 h-7 text-white group-hover:rotate-12 transition-transform duration-300" />
          <span className="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse" />
        </button>}

      {/* èŠå¤©çª—å£ */}
      {isOpen && <div className="w-96 h-[600px] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden" style={{
      boxShadow: '0 20px 60px rgba(0, 0, 0, 0.15)'
    }}>
          {/* å¤´éƒ¨ */}
          <div className="bg-gradient-to-r from-[#D4A574] to-[#E8A849] p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                <Sparkles className="w-5 h-5 text-white" />
              </div>
              <div>
                <h3 className="text-white font-bold text-lg">æ•¦ç…ŒAIåŠ©æ‰‹</h3>
                <p className="text-white/80 text-xs flex items-center gap-1">
                  <span className="w-2 h-2 bg-green-400 rounded-full animate-pulse" />
                  åœ¨çº¿
                </p>
              </div>
            </div>
            <button onClick={() => setIsOpen(false)} className="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors">
              <X className="w-5 h-5 text-white" />
            </button>
          </div>

          {/* æ¶ˆæ¯åŒºåŸŸ */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-gray-50 to-white">
            {messages.map((message, index) => <div key={index} className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[85%] rounded-2xl p-3 ${message.role === 'user' ? 'bg-gradient-to-br from-[#D4A574] to-[#E8A849] text-white' : 'bg-white shadow-md border border-gray-100'}`}>
                  {message.role === 'assistant' && <div className="flex items-center gap-2 mb-2">
                      <Sparkles className="w-4 h-4 text-[#D4A574]" />
                      <span className="text-xs font-medium text-gray-500">AIåŠ©æ‰‹</span>
                    </div>}
                  <div className={`text-sm leading-relaxed whitespace-pre-wrap ${message.role === 'user' ? 'text-white' : 'text-gray-700'}`}>
                    {message.content}
                  </div>
                </div>
              </div>)}
            
            {isTyping && <div className="flex justify-start">
                <div className="bg-white shadow-md border border-gray-100 rounded-2xl p-3 flex items-center gap-2">
                  <div className="flex gap-1">
                    <span className="w-2 h-2 bg-[#D4A574] rounded-full animate-bounce" style={{
                animationDelay: '0ms'
              }} />
                    <span className="w-2 h-2 bg-[#D4A574] rounded-full animate-bounce" style={{
                animationDelay: '150ms'
              }} />
                    <span className="w-2 h-2 bg-[#D4A574] rounded-full animate-bounce" style={{
                animationDelay: '300ms'
              }} />
                  </div>
                  <span className="text-xs text-gray-500">AIæ­£åœ¨æ€è€ƒ...</span>
                </div>
              </div>}
            <div ref={messagesEndRef} />
          </div>

          {/* è¾“å…¥åŒºåŸŸ */}
          <div className="p-4 bg-white border-t border-gray-100">
            <div className="flex gap-2">
              <input type="text" value={inputValue} onChange={e => setInputValue(e.target.value)} onKeyPress={handleKeyPress} placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." className="flex-1 px-4 py-3 bg-gray-50 rounded-xl border border-gray-200 focus:border-[#D4A574] focus:ring-2 focus:ring-[#D4A574]/20 outline-none transition-all text-sm" />
              <button onClick={handleSendMessage} disabled={isTyping} className="w-12 h-12 bg-gradient-to-br from-[#D4A574] to-[#E8A849] rounded-xl flex items-center justify-center hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" style={{
            boxShadow: '0 4px 15px rgba(212, 165, 116, 0.3)'
          }}>
                <Send className="w-5 h-5 text-white" />
              </button>
            </div>
            
            {/* å¿«æ·é—®é¢˜ */}
            <div className="flex gap-2 mt-3 overflow-x-auto pb-1">
              <button onClick={() => {
            setInputValue('è«é«˜çªŸçš„å¼€æ”¾æ—¶é—´å’Œé—¨ç¥¨ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ');
            setTimeout(handleSendMessage, 100);
          }} className="flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-600 transition-colors">
                è«é«˜çªŸé—¨ç¥¨
              </button>
              <button onClick={() => {
            setInputValue('æ¨èä¸€æ¡æ•¦ç…Œä¸€æ—¥æ¸¸è·¯çº¿');
            setTimeout(handleSendMessage, 100);
          }} className="flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-600 transition-colors">
                ä¸€æ—¥æ¸¸è·¯çº¿
              </button>
              <button onClick={() => {
            setInputValue('æ•¦ç…Œæœ‰ä»€ä¹ˆç‰¹è‰²ç¾é£Ÿï¼Ÿ');
            setTimeout(handleSendMessage, 100);
          }} className="flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-600 transition-colors">
                ç‰¹è‰²ç¾é£Ÿ
              </button>
              <button onClick={() => {
            setInputValue('é¸£æ²™å±±æœˆç‰™æ³‰æ€ä¹ˆæ‹ç…§å¥½çœ‹ï¼Ÿ');
            setTimeout(handleSendMessage, 100);
          }} className="flex-shrink-0 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-600 transition-colors">
                æ‹ç…§æŠ€å·§
              </button>
            </div>
          </div>
        </div>}
    </div>;
}